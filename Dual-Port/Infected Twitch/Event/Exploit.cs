#region

using System;
using Infected_Twitch.Core;
using Infected_Twitch.Menus;
using EloBuddy;
using LeagueSharp.SDK;
using LeagueSharp.SDK.Core.Utils;

#endregion

namespace Infected_Twitch.Event
{
    internal class Exploit : Core.Core
    {
        public static void Update(EventArgs args)
        {
            if (Target == null || !Target.LSIsValidTarget(Player.AttackRange) || Target.IsDead || Target.IsInvulnerable) return;

            if (!MenuConfig.UseExploit) return;
            if (!Spells.Q.IsReady()) return;

            if (MenuConfig.Eaaq && Spells.E.IsReady())
            {
                if (Target.Distance(Player) < Player.GetRealAutoAttackRange(Target))
                {
                    if (Target.Health < Dmg.EDamage(Target) * 1.1 + Player.GetAutoAttackDamage(Target))
                    {
                        Usables.Botrk();
                        Spells.E.Cast();
                    }

                    if (Target.Health < Dmg.EDamage(Target) + Player.GetAutoAttackDamage(Target))
                    {
                        Spells.E.Cast();
                    }

                    if (!MenuConfig.Eaaaaq) return;
                    if (Target.Health < Dmg.EDamage(Target) + Player.GetAutoAttackDamage(Target) && Player.HealthPercent >= 65)
                    {
                        Spells.E.Cast();
                        do
                        {
                            Chat.Print("Exploit: Casting E AA AA Q");
                        } while (Spells.E.Cast());

                    }
                }
            }

            if (!(Target.Health < Player.GetAutoAttackDamage(Target)) || !Player.Spellbook.IsAutoAttacking) return;

            EloBuddy.Player.IssueOrder(GameObjectOrder.AttackUnit, Target);
            Spells.Q.Cast();
            {
                Chat.Print("Exploit Active...");
            }
        }
    }
}
